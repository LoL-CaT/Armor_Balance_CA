(define "start_value"
	{if min_energy %1
		{health_damage_count %2 
			{effects "" "" "" "mp_destroy"}		
		}
)
(define "next_value"
	else min_energy %1
		{health_damage_count %2 
			{effects "" "" "" "mp_destroy"}		
		}
)
(define "end_value"
	else min_energy %1
		{health_damage_count %2 
			{effects "" "" "" "mp_destroy"}		
		}
	}
)	
	

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

(define "energy_table"
	
	("start_value" args	(	40	800	))
	("next_value" args	(	39.9	798	))
	("next_value" args	(	39.8	796	))
	("next_value" args	(	39.7	794	))
	("next_value" args	(	39.6	792	))
	("next_value" args	(	39.5	790	))
	("next_value" args	(	39.4	788	))
	("next_value" args	(	39.3	786	))
	("next_value" args	(	39.2	784	))
	("next_value" args	(	39.1	782	))
	("next_value" args	(	39	780	))
	("next_value" args	(	38.9	778	))
	("next_value" args	(	38.8	776	))
	("next_value" args	(	38.7	774	))
	("next_value" args	(	38.6	772	))
	("next_value" args	(	38.5	770	))
	("next_value" args	(	38.4	768	))
	("next_value" args	(	38.3	766	))
	("next_value" args	(	38.2	764	))
	("next_value" args	(	38.1	762	))
	("next_value" args	(	38	760	))
	("next_value" args	(	37.9	758	))
	("next_value" args	(	37.8	756	))
	("next_value" args	(	37.7	754	))
	("next_value" args	(	37.6	752	))
	("next_value" args	(	37.5	750	))
	("next_value" args	(	37.4	748	))
	("next_value" args	(	37.3	746	))
	("next_value" args	(	37.2	744	))
	("next_value" args	(	37.1	742	))
	("next_value" args	(	37	740	))
	("next_value" args	(	36.9	738	))
	("next_value" args	(	36.8	736	))
	("next_value" args	(	36.7	734	))
	("next_value" args	(	36.6	732	))
	("next_value" args	(	36.5	730	))
	("next_value" args	(	36.4	728	))
	("next_value" args	(	36.3	726	))
	("next_value" args	(	36.2	724	))
	("next_value" args	(	36.1	722	))
	("next_value" args	(	36	720	))
	("next_value" args	(	35.9	718	))
	("next_value" args	(	35.8	716	))
	("next_value" args	(	35.7	714	))
	("next_value" args	(	35.6	712	))
	("next_value" args	(	35.5	710	))
	("next_value" args	(	35.4	708	))
	("next_value" args	(	35.3	706	))
	("next_value" args	(	35.2	704	))
	("next_value" args	(	35.1	702	))
	("next_value" args	(	35	700	))
	("next_value" args	(	34.9	698	))
	("next_value" args	(	34.8	696	))
	("next_value" args	(	34.7	694	))
	("next_value" args	(	34.6	692	))
	("next_value" args	(	34.5	690	))
	("next_value" args	(	34.4	688	))
	("next_value" args	(	34.3	686	))
	("next_value" args	(	34.2	684	))
	("next_value" args	(	34.1	682	))
	("next_value" args	(	34	680	))
	("next_value" args	(	33.9	678	))
	("next_value" args	(	33.8	676	))
	("next_value" args	(	33.7	674	))
	("next_value" args	(	33.6	672	))
	("next_value" args	(	33.5	670	))
	("next_value" args	(	33.4	668	))
	("next_value" args	(	33.3	666	))
	("next_value" args	(	33.2	664	))
	("next_value" args	(	33.1	662	))
	("next_value" args	(	33	660	))
	("next_value" args	(	32.9	658	))
	("next_value" args	(	32.8	656	))
	("next_value" args	(	32.7	654	))
	("next_value" args	(	32.6	652	))
	("next_value" args	(	32.5	650	))
	("next_value" args	(	32.4	648	))
	("next_value" args	(	32.3	646	))
	("next_value" args	(	32.2	644	))
	("next_value" args	(	32.1	642	))
	("next_value" args	(	32	640	))
	("next_value" args	(	31.9	638	))
	("next_value" args	(	31.8	636	))
	("next_value" args	(	31.7	634	))
	("next_value" args	(	31.6	632	))
	("next_value" args	(	31.5	630	))
	("next_value" args	(	31.4	628	))
	("next_value" args	(	31.3	626	))
	("next_value" args	(	31.2	624	))
	("next_value" args	(	31.1	622	))
	("next_value" args	(	31	620	))
	("next_value" args	(	30.9	618	))
	("next_value" args	(	30.8	616	))
	("next_value" args	(	30.7	614	))
	("next_value" args	(	30.6	612	))
	("next_value" args	(	30.5	610	))
	("next_value" args	(	30.4	608	))
	("next_value" args	(	30.3	606	))
	("next_value" args	(	30.2	604	))
	("next_value" args	(	30.1	602	))
	("next_value" args	(	30	600	))
	("next_value" args	(	29.9	598	))
	("next_value" args	(	29.8	596	))
	("next_value" args	(	29.7	594	))
	("next_value" args	(	29.6	592	))
	("next_value" args	(	29.5	590	))
	("next_value" args	(	29.4	588	))
	("next_value" args	(	29.3	586	))
	("next_value" args	(	29.2	584	))
	("next_value" args	(	29.1	582	))
	("next_value" args	(	29	580	))
	("next_value" args	(	28.9	578	))
	("next_value" args	(	28.8	576	))
	("next_value" args	(	28.7	574	))
	("next_value" args	(	28.6	572	))
	("next_value" args	(	28.5	570	))
	("next_value" args	(	28.4	568	))
	("next_value" args	(	28.3	566	))
	("next_value" args	(	28.2	564	))
	("next_value" args	(	28.1	562	))
	("next_value" args	(	28	560	))
	("next_value" args	(	27.9	558	))
	("next_value" args	(	27.8	556	))
	("next_value" args	(	27.7	554	))
	("next_value" args	(	27.6	552	))
	("next_value" args	(	27.5	550	))
	("next_value" args	(	27.4	548	))
	("next_value" args	(	27.3	546	))
	("next_value" args	(	27.2	544	))
	("next_value" args	(	27.1	542	))
	("next_value" args	(	27	540	))
	("next_value" args	(	26.9	538	))
	("next_value" args	(	26.8	536	))
	("next_value" args	(	26.7	534	))
	("next_value" args	(	26.6	532	))
	("next_value" args	(	26.5	530	))
	("next_value" args	(	26.4	528	))
	("next_value" args	(	26.3	526	))
	("next_value" args	(	26.2	524	))
	("next_value" args	(	26.1	522	))
	("next_value" args	(	26	520	))
	("next_value" args	(	25.9	518	))
	("next_value" args	(	25.8	516	))
	("next_value" args	(	25.7	514	))
	("next_value" args	(	25.6	512	))
	("next_value" args	(	25.5	510	))
	("next_value" args	(	25.4	508	))
	("next_value" args	(	25.3	506	))
	("next_value" args	(	25.2	504	))
	("next_value" args	(	25.1	502	))
	("next_value" args	(	25	500	))
	("next_value" args	(	24.9	498	))
	("next_value" args	(	24.8	496	))
	("next_value" args	(	24.7	494	))
	("next_value" args	(	24.6	492	))
	("next_value" args	(	24.5	490	))
	("next_value" args	(	24.4	488	))
	("next_value" args	(	24.3	486	))
	("next_value" args	(	24.2	484	))
	("next_value" args	(	24.1	482	))
	("next_value" args	(	24	480	))
	("next_value" args	(	23.9	478	))
	("next_value" args	(	23.8	476	))
	("next_value" args	(	23.7	474	))
	("next_value" args	(	23.6	472	))
	("next_value" args	(	23.5	470	))
	("next_value" args	(	23.4	468	))
	("next_value" args	(	23.3	466	))
	("next_value" args	(	23.2	464	))
	("next_value" args	(	23.1	462	))
	("next_value" args	(	23	460	))
	("next_value" args	(	22.9	458	))
	("next_value" args	(	22.8	456	))
	("next_value" args	(	22.7	454	))
	("next_value" args	(	22.6	452	))
	("next_value" args	(	22.5	450	))
	("next_value" args	(	22.4	448	))
	("next_value" args	(	22.3	446	))
	("next_value" args	(	22.2	444	))
	("next_value" args	(	22.1	442	))
	("next_value" args	(	22	440	))
	("next_value" args	(	21.9	438	))
	("next_value" args	(	21.8	436	))
	("next_value" args	(	21.7	434	))
	("next_value" args	(	21.6	432	))
	("next_value" args	(	21.5	430	))
	("next_value" args	(	21.4	428	))
	("next_value" args	(	21.3	426	))
	("next_value" args	(	21.2	424	))
	("next_value" args	(	21.1	422	))
	("next_value" args	(	21	420	))
	("next_value" args	(	20.9	418	))
	("next_value" args	(	20.8	416	))
	("next_value" args	(	20.7	414	))
	("next_value" args	(	20.6	412	))
	("next_value" args	(	20.5	410	))
	("next_value" args	(	20.4	408	))
	("next_value" args	(	20.3	406	))
	("next_value" args	(	20.2	404	))
	("next_value" args	(	20.1	402	))
	("next_value" args	(	20	400	))
	("next_value" args	(	19.9	398	))
	("next_value" args	(	19.8	396	))
	("next_value" args	(	19.7	394	))
	("next_value" args	(	19.6	392	))
	("next_value" args	(	19.5	390	))
	("next_value" args	(	19.4	388	))
	("next_value" args	(	19.3	386	))
	("next_value" args	(	19.2	384	))
	("next_value" args	(	19.1	382	))
	("next_value" args	(	19	380	))
	("next_value" args	(	18.9	378	))
	("next_value" args	(	18.8	376	))
	("next_value" args	(	18.7	374	))
	("next_value" args	(	18.6	372	))
	("next_value" args	(	18.5	370	))
	("next_value" args	(	18.4	368	))
	("next_value" args	(	18.3	366	))
	("next_value" args	(	18.2	364	))
	("next_value" args	(	18.1	362	))
	("next_value" args	(	18	360	))
	("next_value" args	(	17.9	358	))
	("next_value" args	(	17.8	356	))
	("next_value" args	(	17.7	354	))
	("next_value" args	(	17.6	352	))
	("next_value" args	(	17.5	350	))
	("next_value" args	(	17.4	348	))
	("next_value" args	(	17.3	346	))
	("next_value" args	(	17.2	344	))
	("next_value" args	(	17.1	342	))
	("next_value" args	(	17	340	))
	("next_value" args	(	16.9	338	))
	("next_value" args	(	16.8	336	))
	("next_value" args	(	16.7	334	))
	("next_value" args	(	16.6	332	))
	("next_value" args	(	16.5	330	))
	("next_value" args	(	16.4	328	))
	("next_value" args	(	16.3	326	))
	("next_value" args	(	16.2	324	))
	("next_value" args	(	16.1	322	))
	("next_value" args	(	16	320	))
	("next_value" args	(	15.9	318	))
	("next_value" args	(	15.8	316	))
	("next_value" args	(	15.7	314	))
	("next_value" args	(	15.6	312	))
	("next_value" args	(	15.5	310	))
	("next_value" args	(	15.4	308	))
	("next_value" args	(	15.3	306	))
	("next_value" args	(	15.2	304	))
	("next_value" args	(	15.1	302	))
	("next_value" args	(	15	300	))
	("next_value" args	(	14.9	298	))
	("next_value" args	(	14.8	296	))
	("next_value" args	(	14.7	294	))
	("next_value" args	(	14.6	292	))
	("next_value" args	(	14.5	290	))
	("next_value" args	(	14.4	288	))
	("next_value" args	(	14.3	286	))
	("next_value" args	(	14.2	284	))
	("next_value" args	(	14.1	282	))
	("next_value" args	(	14	280	))
	("next_value" args	(	13.9	278	))
	("next_value" args	(	13.8	276	))
	("next_value" args	(	13.7	274	))
	("next_value" args	(	13.6	272	))
	("next_value" args	(	13.5	270	))
	("next_value" args	(	13.4	268	))
	("next_value" args	(	13.3	266	))
	("next_value" args	(	13.2	264	))
	("next_value" args	(	13.1	262	))
	("next_value" args	(	13	260	))
	("next_value" args	(	12.9	258	))
	("next_value" args	(	12.8	256	))
	("next_value" args	(	12.7	254	))
	("next_value" args	(	12.6	252	))
	("next_value" args	(	12.5	250	))
	("next_value" args	(	12.4	248	))
	("next_value" args	(	12.3	246	))
	("next_value" args	(	12.2	244	))
	("next_value" args	(	12.1	242	))
	("next_value" args	(	12	240	))
	("next_value" args	(	11.9	238	))
	("next_value" args	(	11.8	236	))
	("next_value" args	(	11.7	234	))
	("next_value" args	(	11.6	232	))
	("next_value" args	(	11.5	230	))
	("next_value" args	(	11.4	228	))
	("next_value" args	(	11.3	226	))
	("next_value" args	(	11.2	224	))
	("next_value" args	(	11.1	222	))
	("next_value" args	(	11	220	))
	("next_value" args	(	10.9	218	))
	("next_value" args	(	10.8	216	))
	("next_value" args	(	10.7	214	))
	("next_value" args	(	10.6	212	))
	("next_value" args	(	10.5	210	))
	("next_value" args	(	10.4	208	))
	("next_value" args	(	10.3	206	))
	("next_value" args	(	10.2	204	))
	("next_value" args	(	10.1	202	))
	("next_value" args	(	10	200	))
	("next_value" args	(	9.9	198	))
	("next_value" args	(	9.8	196	))
	("next_value" args	(	9.7	194	))
	("next_value" args	(	9.6	192	))
	("next_value" args	(	9.5	190	))
	("next_value" args	(	9.4	188	))
	("next_value" args	(	9.3	186	))
	("next_value" args	(	9.2	184	))
	("next_value" args	(	9.1	182	))
	("next_value" args	(	9	180	))
	("next_value" args	(	8.9	178	))
	("next_value" args	(	8.8	176	))
	("next_value" args	(	8.7	174	))
	("next_value" args	(	8.6	172	))
	("next_value" args	(	8.5	170	))
	("next_value" args	(	8.4	168	))
	("next_value" args	(	8.3	166	))
	("next_value" args	(	8.2	164	))
	("next_value" args	(	8.1	162	))
	("next_value" args	(	8	160	))
	("next_value" args	(	7.9	158	))
	("next_value" args	(	7.8	156	))
	("next_value" args	(	7.7	154	))
	("next_value" args	(	7.6	152	))
	("next_value" args	(	7.5	150	))
	("next_value" args	(	7.4	148	))
	("next_value" args	(	7.3	146	))
	("next_value" args	(	7.2	144	))
	("next_value" args	(	7.1	142	))
	("next_value" args	(	7	140	))
	("next_value" args	(	6.9	138	))
	("next_value" args	(	6.8	136	))
	("next_value" args	(	6.7	134	))
	("next_value" args	(	6.6	132	))
	("next_value" args	(	6.5	130	))
	("next_value" args	(	6.4	128	))
	("next_value" args	(	6.3	126	))
	("next_value" args	(	6.2	124	))
	("next_value" args	(	6.1	122	))
	("next_value" args	(	6	120	))
	("next_value" args	(	5.9	118	))
	("next_value" args	(	5.8	116	))
	("next_value" args	(	5.7	114	))
	("next_value" args	(	5.6	112	))
	("next_value" args	(	5.5	110	))
	("next_value" args	(	5.4	108	))
	("next_value" args	(	5.3	106	))
	("next_value" args	(	5.2	104	))
	("next_value" args	(	5.1	102	))
	("next_value" args	(	5	100	))
	("next_value" args	(	4.9	98	))
	("next_value" args	(	4.8	96	))
	("next_value" args	(	4.7	94	))
	("next_value" args	(	4.6	92	))
	("next_value" args	(	4.5	90	))
	("next_value" args	(	4.4	88	))
	("next_value" args	(	4.3	86	))
	("next_value" args	(	4.2	84	))
	("next_value" args	(	4.1	82	))
	("next_value" args	(	4	80	))
	("next_value" args	(	3.9	78	))
	("next_value" args	(	3.8	76	))
	("next_value" args	(	3.7	74	))
	("next_value" args	(	3.6	72	))
	("next_value" args	(	3.5	70	))
	("next_value" args	(	3.4	68	))
	("next_value" args	(	3.3	66	))
	("next_value" args	(	3.2	64	))
	("next_value" args	(	3.1	62	))
	("next_value" args	(	3	60	))
	("next_value" args	(	2.9	58	))
	("next_value" args	(	2.8	56	))
	("next_value" args	(	2.7	54	))
	("next_value" args	(	2.6	52	))
	("next_value" args	(	2.5	50	))
	("next_value" args	(	2.4	48	))
	("next_value" args	(	2.3	46	))
	("next_value" args	(	2.2	44	))
	("next_value" args	(	2.1	42	))
	("next_value" args	(	2	40	))
	("next_value" args	(	1.9	38	))
	("next_value" args	(	1.8	36	))
	("next_value" args	(	1.7	34	))
	("next_value" args	(	1.6	32	))
	("next_value" args	(	1.5	30	))
	("next_value" args	(	1.4	28	))
	("next_value" args	(	1.3	26	))
	("next_value" args	(	1.2	24	))
	("next_value" args	(	1.1	22	))
	("next_value" args	(	1	20	))
	("next_value" args	(	0.9	18	))
	("next_value" args	(	0.8	16	))
	("next_value" args	(	0.7	14	))
	("next_value" args	(	0.6	12	))
	("end_value" args	(	0.5	10	))
)
(define "kill_crew"
	{if rand %rate 
		{if not "crew_knock_out"
			{if crew_in_place "%crew"
				{if not tagged "destroyed"
					{damage_report "%crew" "aircraft_damage/crew_dead"}
				}
			}
		}
		{kill_crew "%crew"}
	}
)

(define "kill_crew_process"
	
	{if component "body"
		{if rand 0.5
			{if rand 0.5
				("kill_crew" crew(driver) rate(%rate))
			else
				("kill_crew" crew(gunner) rate(%rate))
			}
		else	
			{if rand 0.5	
				("kill_crew" crew(driver) rate(%rate))
			else
				("kill_crew" crew(gunner) rate(%rate))
			}
		}
	}
	{if not "crew_knock_out"
		{if not tagged "destroyed"	
			{if not operatable
				{damage_report "crew" "component/crew_down"}
				{tags add "crew_knock_out"}
			}	
		}
	}
	
)

(define "calculate_blast_damage"							
	("energy_table")
)

(define "calculate_hit_damage"
	{if volume "body"
			{if stuff "pistol" {if rand 0.5 ("health_damage" c(50))}}
			{if stuff "smg" {if rand 0.5 ("health_damage" c(50))}}
			{if stuff "rifle" {if rand 0.5 ("health_damage" c(150))}}
			{if stuff "mgun" {if rand 0.5 ("health_damage" c(150))}}
			{if stuff "hmgun" {if rand 0.5 ("health_damage" c(250))}}
			{if stuff "zenite" {if rand 0.5 ("health_damage" c(1000))}}
			{if stuff "ptr" {if rand 0.5 ("health_damage" c(500))}}
			{if stuff "shell" {if rand 0.5 ("health_damage" c(2500))}}
			{if stuff "big shell" {if rand 0.5 ("health_damage" c(8500))}}
	}
	{if stuff "shell"
		{if stuff "shell fg"
			("kill_crew_process" rate(1))
		
		else stuff "shell cu"
			("kill_crew_process" rate(1))
		else
			{if stuff "huge"
				("kill_crew_process" rate(1))
			else stuff "large"
				("kill_crew_process" rate(1))
			else stuff "medium"
				("kill_crew_process" rate(0.7))
			else stuff "small"
				("kill_crew_process" rate(0.5))
			}
		}
	}
)

	

